<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–æ–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: "DM Sans", sans-serif;
        }
        
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .box {
            width: 90%;
            max-width: 1200px;
            height: auto;
            min-height: 600px;
            margin: 0 auto;
            background-color: #B7C1C3;
            border-radius: 20px;
            box-shadow: 15px 13px 26px 0px rgba(0,0,0,0.73);
            padding: 20px;
        }
        
        .columns-container {
            display: flex;
            flex-wrap: nowrap;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        
        .input_v1 {
            width: 100%;
            margin-top: 10px;
            height: 30px;
            border: 1px solid #CCD6D8;
            border-radius: 10px;
            padding: 5px 10px;
            font-size: 14px;
            box-sizing: border-box;
        }

        .input-label {
            font-size: 12px;
            color: #34495e;
            margin-top: 8px;
            margin-bottom: 2px;
            display: block;
        }
        
        .column1 {
            width: 30%;
            padding-right: 15px;
        }
        
        .column2 {
            width: 45%;
            padding: 0 15px;
        }
        
        .column3 {
            width: 25%;
            padding-left: 15px;
        }
        
        .button {
            width: 100%;
            height: 40px;
            background-color: #747f81;
            border-radius: 20px;
            border: none;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 10px 9px 35px 1px rgba(0,0,0,0.75);
            transition: all 0.3s ease;
        }
        
        .button:hover {
            background-color: #5a6668;
            transform: translateY(-2px);
        }
        
        .result_block {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 15px;
            margin-top: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            height: fit-content;
            min-height: 200px;
        }
        
        .result-title {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        
        .weather-info {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }
        
        .army-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .army-block {
            width: 48%;
            background: white;
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .army-block.your {
            border-left: 4px solid #27ae60;
        }
        
        .army-block.enemy {
            border-left: 4px solid #e74c3c;
        }
        
        .army-name {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .army-power {
            font-size: 16px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .losses-info {
            background: #ffe6e6;
            border-left: 4px solid #ff6b6b;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        
        .support-info {
            background: #e8f5e8;
            border-left: 4px solid #4ecdc4;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        
        .stat-line {
            margin: 5px 0;
            font-size: 13px;
        }
        
        .winner {
            background: linear-gradient(45deg, #56ab2f, #a8e6cf);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin-top: 15px;
        }
        
        .no-results {
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
            padding: 50px 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            border: 2px dashed #bdc3c7;
        }
        
        .guide-block {
            padding: 15px;
            color: #2c3e50;
            background: linear-gradient(135deg, #e8f5e8 0%, #d4f1d4 100%);
            border-radius: 15px;
            margin-top: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            font-size: 11px;
        }
        
        .guide-title {
            font-size: 14px;
            font-weight: bold;
            color: #27ae60;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid #27ae60;
            padding-bottom: 5px;
        }
        
        .guide-item {
            margin-bottom: 10px;
        }
        
        .guide-item strong {
            color: #27ae60;
        }
        
        .guide-desc {
            font-size: 10px;
            margin-left: 15px;
            line-height: 1.3;
        }
        
        .weather-effects {
            margin-bottom: 8px;
        }
        
        .weather-effects strong {
            color: #3498db;
        }
        
        .tip {
            font-size: 10px;
            color: #7f8c8d;
            line-height: 1.3;
        }

        /* –ú–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ */
        @media (max-width: 720px) {
            body {
                padding: 10px;
            }
            
            .box {
                width: 95%;
                padding: 15px;
                border-radius: 15px;
            }
            
            .columns-container {
                flex-direction: column;
                flex-wrap: wrap;
            }
            
            .column1, .column2, .column3 {
                width: 100%;
                padding: 0;
                margin-bottom: 20px;
            }
            
            /* –ü–æ—Ä—è–¥–æ–∫ –∫–æ–ª–æ–Ω–æ–∫: –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–¥—Å–∫–∞–∑–∫–∞, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã */
            .column1 {
                order: 1;
            }
            
            .column3 {
                order: 2;
            }
            
            .column2 {
                order: 3;
            }
            
            .input_v1 {
                height: 35px;
                font-size: 16px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —à—Ä–∏—Ñ—Ç –¥–ª—è –ª—É—á—à–µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
                margin-top: 8px;
            }
            
            .button {
                height: 45px;
                font-size: 18px;
                margin-top: 15px;
            }
            
            /* –£–º–µ–Ω—å—à–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ */
            .guide-block {
                padding: 12px;
                font-size: 10px;
                margin-top: 0;
            }
            
            .guide-title {
                font-size: 13px;
                margin-bottom: 10px;
            }
            
            .guide-item {
                margin-bottom: 8px;
            }
            
            .guide-desc {
                font-size: 9px;
                margin-left: 10px;
            }
            
            .weather-effects {
                margin-bottom: 6px;
            }
            
            .tip {
                font-size: 9px;
            }
            
            /* –°–∫—Ä—ã–≤–∞–µ–º —á–∞—Å—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –ø–æ–¥—Å–∫–∞–∑–∫–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
            .mobile-hide {
                display: none;
            }
            
            /* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã */
            .result_block {
                min-height: 150px;
                padding: 12px;
                margin-top: 0;
            }
            
            .result-title {
                font-size: 16px;
            }
            
            .army-stats {
                flex-direction: column;
                gap: 10px;
            }
            
            .army-block {
                width: 100%;
            }
            
            .weather-info {
                font-size: 14px;
                padding: 8px;
            }
            
            .winner {
                font-size: 16px;
                padding: 12px;
            }
            
            .no-results {
                padding: 30px 15px;
            }
            
            .no-results div:first-child {
                font-size: 36px !important;
            }
        }
        
        @media (max-width: 480px) {
            .box {
                width: 98%;
                padding: 12px;
            }
            
            .input_v1 {
                font-size: 14px;
            }
            
            .button {
                font-size: 16px;
            }
            
            .guide-block {
                font-size: 9px;
                padding: 10px;
            }
            
            .guide-title {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="box">
        <div class="columns-container">
            <div class="column1">
                <input id="your_name" class="input_v1" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω—ã:" type="text">
                <input id="target_name" class="input_v1" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞:" type="text">
                <input id="your_army" class="input_v1" placeholder="–ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –≤–∞—à–µ–π –∞—Ä–º–∏–∏:" type="number">
                <input id="target_army" class="input_v1" placeholder="–ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –∞—Ä–º–∏–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞:" type="number">
                <input id="your_wwp" class="input_v1" placeholder="–í–∞—à –í–í–ü (–º–ª—Ä–¥ $):" type="number">
                <input id="target_wwp" class="input_v1" placeholder="–í–í–ü –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ (–º–ª—Ä–¥ $):" type="number">
                <select id="time_of_year" class="input_v1">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –≥–æ–¥–∞</option>
                    <option value="–ó–∏–º–∞">–ó–∏–º–∞</option>
                    <option value="–í–µ—Å–Ω–∞">–í–µ—Å–Ω–∞</option>
                    <option value="–õ–µ—Ç–æ">–õ–µ—Ç–æ</option>
                    <option value="–û—Å–µ–Ω—å">–û—Å–µ–Ω—å</option>
                </select>
                <input id="your_resourses" class="input_v1" placeholder="–í–∞—à–µ —Å–Ω–∞–±–∂–µ–Ω–∏–µ (1-10):" type="number" min="1" max="10" >
                <input id="target_resourses" class="input_v1" placeholder="–°–Ω–∞–±–∂–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ (1-10):" type="number" min="1" max="10" >
                <input id="fortress" class="input_v1" placeholder="–£–∫—Ä–µ–ø–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ (0-10):" type="number" min="0" max="10" >
            </div>
            <div class="column3">
                <div style="background: #e8f5e8; border-radius: 15px; padding: 15px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); margin-bottom: 10px;">
                    <div style="font-weight:bold; color:#27ae60; text-align:center; margin-bottom:10px;">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Ö–Ω–∏–∫–∏</div>
                    <div style="margin-bottom:8px; color:#34495e;">–í–∞—à–∞ —Å—Ç–æ—Ä–æ–Ω–∞:</div>
                    <input id="your_fighters" class="input_v1" placeholder="–í–∞—à–∏ –∏—Å—Ç—Ä–µ–±–∏—Ç–µ–ª–∏:" type="number">
                    <input id="your_bombers" class="input_v1" placeholder="–í–∞—à–∏ –±–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤—â–∏–∫–∏:" type="number">
                    <input id="your_navy" class="input_v1" placeholder="–í–∞—à —Ñ–ª–æ—Ç (–∫–æ—Ä–∞–±–ª–∏):" type="number">
                    <input id="your_aa" class="input_v1" placeholder="–í–∞—à–∏ –ü–í–û (–µ–¥.):" type="number">
                    <input id="your_tanks" class="input_v1" placeholder="–í–∞—à–∏ —Ç–∞–Ω–∫–∏:" type="number">
                    <div style="margin:12px 0 8px 0; color:#e74c3c;">–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫:</div>
                    <input id="target_fighters" class="input_v1" placeholder="–ò—Å—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞:" type="number">
                    <input id="target_bombers" class="input_v1" placeholder="–ë–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤—â–∏–∫–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞:" type="number">
                    <input id="target_navy" class="input_v1" placeholder="–§–ª–æ—Ç –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ (–∫–æ—Ä–∞–±–ª–∏):" type="number">
                    <input id="target_aa" class="input_v1" placeholder="–ü–í–û –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ (–µ–¥.):" type="number">
                    <input id="target_tanks" class="input_v1" placeholder="–¢–∞–Ω–∫–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞:" type="number">
                </div>
            </div>
            <div class="column2">
                <div class="result_block" id="result_block">
                    <div class="result-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–∂–µ–Ω–∏—è</div>
                    <div id="result_content">
                        <div class="no-results">
                            <div style="font-size: 48px; margin-bottom: 15px;">‚öîÔ∏è</div>
                            <div>–ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å —Å—Ä–∞–∂–µ–Ω–∏–µ" —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–æ—è</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button class="button" onclick="fun1()">–ù–∞—á–∞—Ç—å —Å—Ä–∞–∂–µ–Ω–∏–µ</button>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
        const weatherConfig = {
            1: { name: "–î–æ–∂–¥—å", armyModifier: 0.87, techModifier: 0.85 },
            2: { name: "–õ–∏–≤–µ–Ω—å", armyModifier: 0.7, techModifier: 0.73 },
            3: { name: "–Ø—Å–Ω–æ", armyModifier: 1, techModifier: 1 },
            4: { name: "–¢—É–º–∞–Ω", armyModifier: 0.85, techModifier: 0.75 },
            5: { name: "–°–Ω–µ–≥", armyModifier: 0.80, techModifier: 0.7 },
            6: { name: "–ú–µ—Ç–µ–ª—å", armyModifier: 0.65, techModifier: 0.6 }
        };

        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ–∑–æ–Ω–Ω—ã—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
        const seasonConfig = {
            "–ó–∏–º–∞": { armyModifier: 0.8, techModifier: 0.7, weatherOptions: 6 },
            "–í–µ—Å–Ω–∞": { armyModifier: 0.9, techModifier: 0.87, weatherOptions: 4 },
            "–õ–µ—Ç–æ": { armyModifier: 1.1, techModifier: 1, weatherOptions: 4 },
            "–û—Å–µ–Ω—å": { armyModifier: 0.9, techModifier: 0.9, weatherOptions: 4 }
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–∏—Å–ª–∞ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
        function formatNumberWithSpaces(x) {
            if (typeof x !== "string") x = String(x);
            return x.replace(/\B(?=(\d{3})+(?!\d))/g, " ");
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–≤–æ–¥–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–∏—Å–ª–∞ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
        function handleNumberInput(e) {
            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª–µ type="text" –∏–ª–∏ type="number" –∏ –æ–Ω–æ –Ω–µ –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã
            if (
                (e.target.type === "number" || e.target.type === "text") &&
                !e.target.id.includes('name') &&
                !e.target.id.includes('time_of_year')
            ) {
                let value = e.target.value.replace(/\s/g, '');
                if (value === '') {
                    e.target.value = '';
                    return;
                }
                // –¢–æ–ª—å–∫–æ —á–∏—Å–ª–∞
                value = value.replace(/[^\d]/g, '');
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞
                let selectionStart = e.target.selectionStart;
                let oldLength = e.target.value.length;
                e.target.value = formatNumberWithSpaces(value);
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞ (—á—Ç–æ–±—ã –Ω–µ –ø—Ä—ã–≥–∞–ª)
                let newLength = e.target.value.length;
                e.target.selectionEnd = selectionStart + (newLength - oldLength);
            }
        }

        // –ù–∞–≤–µ—à–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ –≤—Å–µ —á–∏—Å–ª–æ–≤—ã–µ input'—ã (–∫—Ä–æ–º–µ –Ω–∞–∑–≤–∞–Ω–∏–π)
        window.addEventListener('DOMContentLoaded', function() {
            // –¢–æ–ª—å–∫–æ –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–æ–ª–µ–π (–∏—Å–∫–ª—é—á–∞—è –Ω–∞–∑–≤–∞–Ω–∏—è)
            const inputs = document.querySelectorAll('input.input_v1');
            inputs.forEach(input => {
                if (
                    !input.id.includes('name') &&
                    !input.id.includes('time_of_year')
                ) {
                    input.type = "text"; // –ú–µ–Ω—è–µ–º —Ç–∏–ø –Ω–∞ text, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –±—Ä–∞—É–∑–µ—Ä–∞
                    input.addEventListener('input', handleNumberInput);
                }
            });
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —á–∏—Å–ª–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ input —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
        function getNumberValue(id) {
            let val = document.getElementById(id).value.replace(/\s/g, '');
            return val ? +val : 0;
        }

        function fun1() {
            let y_name = document.getElementById("your_name").value || "–í–∞—à–∞ —Å—Ç—Ä–∞–Ω–∞";
            let t_name = document.getElementById("target_name").value || "–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫";

            let y_army = getNumberValue("your_army");
            let t_army = getNumberValue("target_army");

            // –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            let y_fighters = getNumberValue("your_fighters");
            let y_bombers = getNumberValue("your_bombers");
            let y_navy = getNumberValue("your_navy");
            let y_aa = getNumberValue("your_aa");
            let y_tanks = getNumberValue("your_tanks");

            let t_fighters = getNumberValue("target_fighters");
            let t_bombers = getNumberValue("target_bombers");
            let t_navy = getNumberValue("target_navy");
            let t_aa = getNumberValue("target_aa");
            let t_tanks = getNumberValue("target_tanks");

            let y_wwp = getNumberValue("your_wwp");
            let t_wwp = getNumberValue("target_wwp");
            let time_of_year = document.getElementById("time_of_year").value;

            let y_resourses = getNumberValue("your_resourses");
            let t_resourses = getNumberValue("target_resourses");
            let fortress = getNumberValue("fortress");

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ –≥–æ–¥–∞
            if (!time_of_year) {
                const resultBlock = document.getElementById("result_block");
                const resultContent = document.getElementById("result_content");
                
                resultBlock.style.border = "3px solid #e74c3c";
                resultContent.innerHTML = `
                    <div style="text-align: center; color: #e74c3c; font-size: 18px; font-weight: bold; padding: 50px 20px;">
                        <div style="font-size: 48px; margin-bottom: 15px;">‚ö†Ô∏è</div>
                        <div>–í—ã –Ω–µ –≤—ã–±—Ä–∞–ª–∏ –≤—Ä–µ–º—è –≥–æ–¥–∞</div>
                    </div>
                `;
                return;
            }

            // –£–±–∏—Ä–∞–µ–º –∫—Ä–∞—Å–Ω—É—é —Ä–∞–º–∫—É –µ—Å–ª–∏ –≤—Ä–µ–º—è –≥–æ–¥–∞ –≤—ã–±—Ä–∞–Ω–æ
            const resultBlock = document.getElementById("result_block");
            resultBlock.style.border = "none";

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            let original_y_army = y_army;
            let original_t_army = t_army;
            // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
            let original_y_fighters = y_fighters;
            let original_y_bombers = y_bombers;
            let original_y_navy = y_navy;
            let original_y_aa = y_aa;
            let original_y_tanks = y_tanks;
            let original_t_fighters = t_fighters;
            let original_t_bombers = t_bombers;
            let original_t_navy = t_navy;
            let original_t_aa = t_aa;
            let original_t_tanks = t_tanks;

            // –ü–æ–ª—É—á–∞–µ–º –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
            const season = seasonConfig[time_of_year];
            const weatherIndex = Math.floor(Math.random() * season.weatherOptions) + 1;
            const weather = weatherConfig[weatherIndex];

            // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ–≥–æ–¥–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
            y_army *= weather.armyModifier;
            t_army *= weather.armyModifier;

            // –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥ –ø–æ–≥–æ–¥–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
            let y_fighters_weather = y_fighters * weather.techModifier;
            let y_bombers_weather = y_bombers * weather.techModifier;
            let y_navy_weather = y_navy * weather.techModifier;
            let y_aa_weather = y_aa * weather.techModifier;
            let y_tanks_weather = y_tanks * weather.techModifier;

            let t_fighters_weather = t_fighters * weather.techModifier;
            let t_bombers_weather = t_bombers * weather.techModifier;
            let t_navy_weather = t_navy * weather.techModifier;
            let t_aa_weather = t_aa * weather.techModifier;
            let t_tanks_weather = t_tanks * weather.techModifier;

            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–µ–∑–æ–Ω–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
            y_army *= season.armyModifier;
            t_army *= season.armyModifier;

            y_fighters_weather *= season.techModifier;
            y_bombers_weather *= season.techModifier;
            y_navy_weather *= season.techModifier;
            y_aa_weather *= season.techModifier;
            y_tanks_weather *= season.techModifier;

            t_fighters_weather *= season.techModifier;
            t_bombers_weather *= season.techModifier;
            t_navy_weather *= season.techModifier;
            t_aa_weather *= season.techModifier;
            t_tanks_weather *= season.techModifier;

            // –ü—Ä–∏–º–µ–Ω—è–µ–º –±–æ–Ω—É—Å—ã –æ—Ç —É–∫—Ä–µ–ø–ª–µ–Ω–∏–π
            let fortress_bonus = 1 + (fortress * 0.055);
            t_army *= fortress_bonus;

            // –ü—Ä–∏–º–µ–Ω—è–µ–º –±–æ–Ω—É—Å—ã –æ—Ç —Å–Ω–∞–±–∂–µ–Ω–∏—è
            let y_supply_bonus = 1 + (y_resourses * 0.055);
            let t_supply_bonus = 1 + (t_resourses * 0.055);

            y_army *= y_supply_bonus;
            t_army *= t_supply_bonus;

            y_fighters_weather *= y_supply_bonus;
            y_bombers_weather *= y_supply_bonus;
            y_navy_weather *= y_supply_bonus;
            y_aa_weather *= y_supply_bonus;
            y_tanks_weather *= y_supply_bonus;

            t_fighters_weather *= t_supply_bonus;
            t_bombers_weather *= t_supply_bonus;
            t_navy_weather *= t_supply_bonus;
            t_aa_weather *= t_supply_bonus;
            t_tanks_weather *= t_supply_bonus;

            // –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∏ –≤–ª–∏—è–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –≤–∏–¥–æ–≤ –≤–æ–π—Å–∫
            // –ü—Ä–∏–º–µ—Ä: –∏—Å—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ —É–º–µ–Ω—å—à–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤—â–∏–∫–æ–≤ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, –ü–í–û —É–º–µ–Ω—å—à–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞–≤–∏–∞—Ü–∏–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, —Ñ–ª–æ—Ç –≤–ª–∏—è–µ—Ç –Ω–∞ —Ñ–ª–æ—Ç –∏ –∞–≤–∏–∞—Ü–∏—é, —Ç–∞–Ω–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã –ø—Ä–æ—Ç–∏–≤ –∞—Ä–º–∏–∏ –∏ —Ç–µ—Ö–Ω–∏–∫–∏
            // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ª–æ–≥–∏–∫–∏ –ø–æ –∂–µ–ª–∞–Ω–∏—é

            // –í–ª–∏—è–Ω–∏–µ –ü–í–û –Ω–∞ –∞–≤–∏–∞—Ü–∏—é –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
            let y_aviation_penalty = Math.min(0.5, t_aa_weather * 0.01); // –¥–æ -50%
            let t_aviation_penalty = Math.min(0.5, y_aa_weather * 0.01);

            // –í–ª–∏—è–Ω–∏–µ –∏—Å—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –Ω–∞ –±–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤—â–∏–∫–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
            let y_bomber_penalty = Math.min(0.5, t_fighters_weather * 0.015); // –¥–æ -50%
            let t_bomber_penalty = Math.min(0.5, y_fighters_weather * 0.015);

            // –í–ª–∏—è–Ω–∏–µ —Ñ–ª–æ—Ç–∞ –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞
            let navy_diff = y_navy_weather - t_navy_weather;
            let y_navy_bonus = navy_diff > 0 ? Math.min(0.2, navy_diff * 0.01) : 0;
            let t_navy_bonus = navy_diff < 0 ? Math.min(0.2, -navy_diff * 0.01) : 0;

            // –ò—Ç–æ–≥–æ–≤–∞—è —Å–∏–ª–∞ –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–∞ –≤–æ–π—Å–∫ —Å —É—á–µ—Ç–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
            let y_fighters_power = y_fighters_weather * 25 * (1 - y_aviation_penalty);
            let y_bombers_power = y_bombers_weather * 35 * (1 - y_bomber_penalty - y_aviation_penalty);
            let y_navy_power = y_navy_weather * 40 * (1 + y_navy_bonus);
            let y_aa_power = y_aa_weather * 8;
            let y_tanks_power = y_tanks_weather * 15;

            let t_fighters_power = t_fighters_weather * 25 * (1 - t_aviation_penalty);
            let t_bombers_power = t_bombers_weather * 35 * (1 - t_bomber_penalty - t_aviation_penalty);
            let t_navy_power = t_navy_weather * 40 * (1 + t_navy_bonus);
            let t_aa_power = t_aa_weather * 8;
            let t_tanks_power = t_tanks_weather * 15;

            // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–ª–∏—è–Ω–∏—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å
            console.log('–í–ª–∏—è–Ω–∏–µ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤–æ–π—Å–∫ (–≤–∞—à–∞ —Å—Ç–æ—Ä–æ–Ω–∞):');
            console.log('–ò—Å—Ç—Ä–µ–±–∏—Ç–µ–ª–∏:', y_fighters, '=>', y_fighters_weather.toFixed(2), '=>', y_fighters_power.toFixed(2), '| —à—Ç—Ä–∞—Ñ –æ—Ç –ü–í–û:', (y_aviation_penalty*100).toFixed(1)+'%');
            console.log('–ë–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤—â–∏–∫–∏:', y_bombers, '=>', y_bombers_weather.toFixed(2), '=>', y_bombers_power.toFixed(2), '| —à—Ç—Ä–∞—Ñ –æ—Ç –ü–í–û:', (y_aviation_penalty*100).toFixed(1)+'%', '| —à—Ç—Ä–∞—Ñ –æ—Ç –∏—Å—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π:', (y_bomber_penalty*100).toFixed(1)+'%');
            console.log('–§–ª–æ—Ç:', y_navy, '=>', y_navy_weather.toFixed(2), '=>', y_navy_power.toFixed(2), '| –±–æ–Ω—É—Å:', (y_navy_bonus*100).toFixed(1)+'%');
            console.log('–ü–í–û:', y_aa, '=>', y_aa_weather.toFixed(2), '=>', y_aa_power.toFixed(2));
            console.log('–¢–∞–Ω–∫–∏:', y_tanks, '=>', y_tanks_weather.toFixed(2), '=>', y_tanks_power.toFixed(2));
            console.log('–°—É–º–º–∞—Ä–Ω–æ:', (y_fighters_power + y_bombers_power + y_navy_power + y_aa_power + y_tanks_power).toFixed(2));

            console.log('–í–ª–∏—è–Ω–∏–µ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤–æ–π—Å–∫ (–ø—Ä–æ—Ç–∏–≤–Ω–∏–∫):');
            console.log('–ò—Å—Ç—Ä–µ–±–∏—Ç–µ–ª–∏:', t_fighters, '=>', t_fighters_weather.toFixed(2), '=>', t_fighters_power.toFixed(2), '| —à—Ç—Ä–∞—Ñ –æ—Ç –ü–í–û:', (t_aviation_penalty*100).toFixed(1)+'%');
            console.log('–ë–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤—â–∏–∫–∏:', t_bombers, '=>', t_bombers_weather.toFixed(2), '=>', t_bombers_power.toFixed(2), '| —à—Ç—Ä–∞—Ñ –æ—Ç –ü–í–û:', (t_aviation_penalty*100).toFixed(1)+'%', '| —à—Ç—Ä–∞—Ñ –æ—Ç –∏—Å—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π:', (t_bomber_penalty*100).toFixed(1)+'%');
            console.log('–§–ª–æ—Ç:', t_navy, '=>', t_navy_weather.toFixed(2), '=>', t_navy_power.toFixed(2), '| –±–æ–Ω—É—Å:', (t_navy_bonus*100).toFixed(1)+'%');
            console.log('–ü–í–û:', t_aa, '=>', t_aa_weather.toFixed(2), '=>', t_aa_power.toFixed(2));
            console.log('–¢–∞–Ω–∫–∏:', t_tanks, '=>', t_tanks_weather.toFixed(2), '=>', t_tanks_power.toFixed(2));
            console.log('–°—É–º–º–∞—Ä–Ω–æ:', (t_fighters_power + t_bombers_power + t_navy_power + t_aa_power + t_tanks_power).toFixed(2));

            // 1. –°—á–∏—Ç–∞–µ–º —Å–∏–ª—É –∞—Ä–º–∏–∏ –¥–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞—Å–µ–ª–µ–Ω–∏—è
            let y_base_power = y_army + y_fighters_power + y_bombers_power + y_navy_power + y_aa_power + y_tanks_power;
            let t_base_power = t_army + t_fighters_power + t_bombers_power + t_navy_power + t_aa_power + t_tanks_power;

            // 2. –ù–∞—Ö–æ–¥–∏–º —Å–ª–∞–±—É—é —Å—Ç–æ—Ä–æ–Ω—É –∏ –ø—Ä–∏–º–µ–Ω—è–µ–º —à—Ç—Ä–∞—Ñ
            let ratio = 0;
            let weaker = null;
            if (y_base_power > t_base_power && t_base_power > 0) {
                ratio = y_base_power / t_base_power;
                if (ratio > 1.5) weaker = 't';
            } else if (t_base_power > y_base_power && y_base_power > 0) {
                ratio = t_base_power / y_base_power;
                if (ratio > 1.5) weaker = 'y';
            }
            if (weaker === 'y') {
                y_base_power = Math.floor(y_base_power * 0.7);
            }
            if (weaker === 't') {
                t_base_power = Math.floor(t_base_power * 0.7);
            }

            // --- –í–ê–ñ–ù–û: –æ–±—ä—è–≤–ª—è–µ–º lossPercentage1/2 –¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ---
            let lossPercentage1 = (Math.random() * 5) + 10;
            let lossPercentage2 = (Math.random() * 5) + 10;
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ—Ç–µ—Ä–∏ –¥–ª—è –º–µ–Ω—å—à–µ–π —Å—Ç–æ—Ä–æ–Ω—ã –≤ 4.6 —Ä–∞–∑–∞ (4 * 1.6 = 6.4)
            if (weaker === 'y') lossPercentage1 *= 6.4;
            if (weaker === 't') lossPercentage2 *= 6.4;

            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏ –æ—Ç –ø–ª–æ—Ö–æ–π –ø–æ–≥–æ–¥—ã
            const weatherLossPenalty = {
                "–°–Ω–µ–≥": 3,
                "–ú–µ—Ç–µ–ª—å": 7
            };
            if (weatherLossPenalty[weather.name]) {
                lossPercentage1 += weatherLossPenalty[weather.name];
                lossPercentage2 += weatherLossPenalty[weather.name];
            }

            // 3. –ü—Ä–∏–º–µ–Ω—è–µ–º –±–æ–Ω—É—Å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞—Å–µ–ª–µ–Ω–∏—è
            let y_population_support = 100;
            let t_population_support = 100;
            
            y_population_support -= lossPercentage1 * 2.5;
            t_population_support -= lossPercentage2 * 2.5;
            
            let y_gdp_support_penalty = 0;
            let t_gdp_support_penalty = 0;
            
            if (y_wwp < t_wwp) {
                let disadvantage_percent = ((t_wwp - y_wwp) / y_wwp) * 100;
                y_gdp_support_penalty = disadvantage_percent / 30;
                y_population_support -= y_gdp_support_penalty;
            }
            
            if (t_wwp < y_wwp) {
                let disadvantage_percent = ((y_wwp - t_wwp) / t_wwp) * 100;
                t_gdp_support_penalty = disadvantage_percent / 30;
                t_population_support -= t_gdp_support_penalty;
            }
            
            y_population_support = Math.max(0, y_population_support);
            t_population_support = Math.max(0, t_population_support);

            let y_support_bonus = y_population_support / 100;
            let t_support_bonus = t_population_support / 100;
            
            let y_a_army = Math.floor(y_base_power * (1 + y_support_bonus));
            let t_a_army = Math.floor(t_base_power * (1 + t_support_bonus));

            // 4. –¢–µ–ø–µ—Ä—å —Å—á–∏—Ç–∞–µ–º –ø–æ—Ç–µ—Ä–∏ –∫–∞–∫ –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –∏—Ç–æ–≥–æ–≤–æ–π —Å–∏–ª—ã
            let losses1 = Math.round((lossPercentage1 / 100) * y_a_army);
            let losses2 = Math.round((lossPercentage2 / 100) * t_a_army);

            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
            let winner = y_a_army > t_a_army ? y_name : 
                        t_a_army > y_a_army ? t_name : "–ù–∏—á—å—è";

            // --- –û–ü–†–ï–î–ï–õ–Ø–ï–ú –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –í–í–ü-–®–¢–†–ê–§–ê ---
            let y_gdp_penalty = false;
            let t_gdp_penalty = false;
            let gdp_ratio_y = y_wwp / t_wwp;
            let gdp_ratio_t = t_wwp / y_wwp;
            if (gdp_ratio_t >= 1.2) {
                y_gdp_penalty = true;
            }
            if (gdp_ratio_y >= 1.2) {
                t_gdp_penalty = true;
            }

            // –°—Ç–∞—Ä—ã–π –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            displayResults({
                y_name, t_name, weather: weather.name, time_of_year,
                y_a_army, t_a_army,
                losses1, losses2, lossPercentage1, lossPercentage2,
                y_population_support, t_population_support,
                y_gdp_support_penalty, t_gdp_support_penalty,
                y_support_bonus, t_support_bonus,
                y_gdp_penalty, t_gdp_penalty,
                winner,
                original_y_army, original_t_army,
                fortress, y_resourses, t_resourses,
                original_y_fighters, original_y_bombers, original_y_navy, original_y_aa, original_y_tanks,
                original_t_fighters, original_t_bombers, original_t_navy, original_t_aa, original_t_tanks
            });
        }

        function displayResults(data) {
            const resultContent = document.getElementById("result_content");

            resultContent.innerHTML = `
                <div class="weather-info">
                    üå§Ô∏è –ü–æ–≥–æ–¥–∞: ${data.weather} (${data.time_of_year})
                </div>

                <div class="army-stats">
                    <div class="army-block your">
                        <div class="army-name">${data.y_name}</div>
                        <div class="army-power">üí™ ${formatNumberWithSpaces(data.y_a_army)}</div>
                        <div class="stat-line">–ê—Ä–º–∏—è: ${formatNumberWithSpaces(data.original_y_army)}</div>
                        <div class="stat-line">–ò—Å—Ç—Ä–µ–±–∏—Ç–µ–ª–∏: ${formatNumberWithSpaces(data.original_y_fighters || 0)}</div>
                        <div class="stat-line">–ë–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤—â–∏–∫–∏: ${formatNumberWithSpaces(data.original_y_bombers || 0)}</div>
                        <div class="stat-line">–§–ª–æ—Ç: ${formatNumberWithSpaces(data.original_y_navy || 0)}</div>
                        <div class="stat-line">–ü–í–û: ${formatNumberWithSpaces(data.original_y_aa || 0)}</div>
                        <div class="stat-line">–¢–∞–Ω–∫–∏: ${formatNumberWithSpaces(data.original_y_tanks || 0)}</div>
                        <div class="stat-line">–°–Ω–∞–±–∂–µ–Ω–∏–µ: ${formatNumberWithSpaces(data.y_resourses)}/10</div>
                    </div>
                    <div class="army-block enemy">
                        <div class="army-name">${data.t_name}</div>
                        <div class="army-power">üí™ ${formatNumberWithSpaces(data.t_a_army)}</div>
                        <div class="stat-line">–ê—Ä–º–∏—è: ${formatNumberWithSpaces(data.original_t_army)}</div>
                        <div class="stat-line">–ò—Å—Ç—Ä–µ–±–∏—Ç–µ–ª–∏: ${formatNumberWithSpaces(data.original_t_fighters || 0)}</div>
                        <div class="stat-line">–ë–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤—â–∏–∫–∏: ${formatNumberWithSpaces(data.original_t_bombers || 0)}</div>
                        <div class="stat-line">–§–ª–æ—Ç: ${formatNumberWithSpaces(data.original_t_navy || 0)}</div>
                        <div class="stat-line">–ü–í–û: ${formatNumberWithSpaces(data.original_t_aa || 0)}</div>
                        <div class="stat-line">–¢–∞–Ω–∫–∏: ${formatNumberWithSpaces(data.original_t_tanks || 0)}</div>
                        <div class="stat-line">–£–∫—Ä–µ–ø–ª–µ–Ω–∏—è: ${formatNumberWithSpaces(data.fortress)}/10</div>
                    </div>
                </div>
                
                <div class="losses-info">
                    <strong>üíÄ –ü–æ—Ç–µ—Ä–∏ –≤ —Å—Ä–∞–∂–µ–Ω–∏–∏:</strong><br>
                    ${data.y_name}: ${formatNumberWithSpaces(data.losses1)} (${data.lossPercentage1.toFixed(1)}%)<br>
                    ${data.t_name}: ${formatNumberWithSpaces(data.losses2)} (${data.lossPercentage2.toFixed(1)}%)
                </div>
                
                <div class="support-info">
                    <strong>üë• –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞—Å–µ–ª–µ–Ω–∏—è:</strong><br>
                    ${data.y_name}: ${data.y_population_support.toFixed(1)}% 
                    ${data.y_gdp_support_penalty > 0 ? `(—à—Ç—Ä–∞—Ñ: -${data.y_gdp_support_penalty.toFixed(1)}%)` : ''}<br>
                    ${data.t_name}: ${data.t_population_support.toFixed(1)}%
                    ${data.t_gdp_support_penalty > 0 ? `(—à—Ç—Ä–∞—Ñ: -${data.t_gdp_support_penalty.toFixed(1)}%)` : ''}
                </div>
                
                <div class="support-info">
                    <strong>‚ö° –ë–æ–Ω—É—Å—ã –∫ –∞—Ä–º–∏–∏:</strong><br>
                    ${data.y_name}: +${(data.y_support_bonus * 100).toFixed(1)}% –æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
                    ${data.y_gdp_penalty ? ' | -10% –æ—Ç –í–í–ü' : ''}<br>
                    ${data.t_name}: +${(data.t_support_bonus * 100).toFixed(1)}% –æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
                    ${data.t_gdp_penalty ? ' | -10% –æ—Ç –í–í–ü' : ''}
                </div>
                
                <div class="winner">
                    üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: ${data.winner}
                </div>
            `;
        }
    </script>
</body>
</html>
